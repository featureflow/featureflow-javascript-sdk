<!doctype>
<html>
  <head>
    <meta charset="utf-8">
    <script src="https://controls.featureflow.io/featureflow.min.js"></script>
  </head>
  <body>
    <h1>Featureflow test harness</h1>
    <ul id="features"></ul>
    <button class="reload">Reload</button>
    <script>
      var context = {
        key: 'user1',
          values: {
              tier: 'gold',
              country: 'australia'
          }
      };
      var featureflow = Featureflow.init('371783ec416a4feeb441b5731f34c2c8', context, {});

      function render(key, failoverValue){
        var value = featureflow.evaluate(key, failoverValue);
        var el = document.querySelector('#features');
        el.innerHTML = el.innerHTML + "<li>" + key + ' = ' + value.toString() + " </li>";
      }

      featureflow.on('ready', function() {
        console.log('Ready!');
          for (var property in featureflow.controls) {
              if (featureflow.controls.hasOwnProperty(property)) {
                  render(property, 'OFF');
              }
          }

      });

    </script>
  </body>
</html>
